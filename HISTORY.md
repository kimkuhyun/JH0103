# JH0103 개발 히스토리

프로젝트의 주요 기능 개발 및 개선 이력을 날짜와 기능별로 정리한 문서입니다.

## 목차
1. [전체 타임라인](#1-전체-타임라인)
2. [상세 개발 이력](#2-상세-개발-이력)
3. [기능별 개선 사항](#3-기능별-개선-사항)

---

## 1. 전체 타임라인

```
2026-01-08  v1.0  수동 캡처 방식 도입
2026-01-10  v2.0  스크롤 기반 자동 캡처
2026-01-10  v3.0  CDP 단일 영역 캡처
2026-01-14  v4.0  메모리 최적화 및 성능 개선
2026-01-14  v5.0  동적 공고 표시 시스템
2026-01-14  v5.1  JSON 처리 로직 중앙화
2026-01-15  v5.2  주소 정제 정규식 개선
```

---

## 2. 상세 개발 이력

### 2.1 v1.0: 수동 캡처 방식 (2026-01-08)

**커밋**: 908e871, ca6369c

**주요 작업**
- 크롬 확장프로그램 기본 구조 생성
- AI 분석 서버 초기 구축
- 사용자가 직접 스크린샷을 업로드하는 방식

**한계점**
- 매번 수동으로 캡처해야 함
- 캡처 범위를 조절하기 어려움
- 일관성 없는 데이터 수집

---

### 2.2 v2.0: 스크롤 기반 자동 캡처 (2026-01-10)

**커밋**: 63b17f0, 36ebf4f

**주요 작업**
- 원클릭 자동 캡처 시스템 구현
- 스크롤하면서 10장까지 자동 캡처
- 여러 이미지를 하나로 합치는 기능 추가
- 회사명, 제목, 급여 등 메타데이터 자동 추출

**개선 효과**
- 사용자 개입 최소화
- 긴 공고도 전체 캡처 가능
- 자동화된 데이터 수집

**남은 문제**
- 추천 공고가 함께 캡처됨 (80% 높이 제한으로 불완전 제거)
- 10장의 이미지를 서버에서 합치느라 메모리 사용량 증가
- 스크롤하며 여러 번 캡처하므로 시간 소요

---

### 2.3 v3.0: CDP 단일 영역 캡처 (2026-01-10)

**커밋**: 1ad2cc6

**주요 작업**
- Chrome DevTools Protocol 활용
- 메인 콘텐츠 영역만 정확히 지정
- 스크롤 없이 한 번에 전체 영역 캡처
- 추천 공고 섹션 완전 제거
- 비동기 처리로 즉시 응답

**기술적 변경**
- `chrome.tabs.captureVisibleTab` → `chrome.debugger` + `Page.captureScreenshot`
- 10장 PNG 이미지 → 1장 JPEG 이미지
- 이미지 병합 과정 완전 제거
- 동기 처리 → 비동기 처리 (폴링 방식)

**개선 효과**
- 추천 공고 혼입 문제 100% 해결
- 메모리 사용량 대폭 감소
- 처리 시간 단축

---

### 2.4 v4.0: 메모리 최적화 및 성능 개선 (2026-01-14)

**주요 작업**
- 이미지 리사이징 최적화 (scale 2.0 → 1.0)
- PDF 생성 시 메모리 사용량 감소
- 사이트별 메인 섹션 선택자 정교화

**개선 효과**
- 빠른 분석 속도
- 서버 메모리 부담 감소
- 정확도 향상

---

### 2.5 v5.0: 동적 공고 표시 시스템 (2026-01-14)

**커밋**: 1452d03, 4e3a9a7

**배경**
- 각 공고마다 항목 구성이 다름 (복지, 기술스택, 우대사항 등)
- 고정된 화면 구조로는 모든 케이스에 대응 불가

**주요 작업**
- JSON V2 스키마 도입 (배열 기반 동적 섹션)
- AI 프롬프트 대폭 개선 (동적 섹션 인식)
- `DynamicJobDetail` 컴포넌트 생성 (동적 렌더링)

**JSON 구조 변경**
```
기존 (V1): 고정 필드 (복지, 급여, 위치 등)
개선 (V2): 동적 섹션 배열 [{title, items: [{label, value}]}]
```

**개선 효과**
- 임의의 공고 형태에 자동 대응
- 항목 누락 없이 전체 정보 표시
- 유연한 화면 구성

---

### 2.6 v5.1: JSON 처리 로직 중앙화 (2026-01-14)

**커밋**: d87e6b2, 1bd09eb, 1306613

**배경**
- JSON 처리 로직이 4개 파일에 분산 (server.py, Dashboard.tsx, jobParser.ts, DynamicJobDetail.tsx)
- 중복 코드, 일관성 부족, 예외 처리 미흡

**주요 작업**
- `jsonNormalizer.ts` 생성 (모든 JSON 처리 통합)
- V1 → V2 자동 변환 로직
- 주소 정제, 회사명 추출, 파일명 생성 통합
- server.py에서 파싱 로직 제거 (RAW JSON만 전송)
- jobParser.ts 간소화 (25% 코드 감소)
- Dashboard.tsx 중복 제거 (6% 코드 감소)

**개선 효과**
- 수정 포인트 4곳 → 1곳
- 일관된 데이터 처리
- 예외 처리 강화

---

### 2.7 백엔드 상태 관리 통일 (2026-01-14 ~ 2026-01-15)

**커밋**: a88cda7, 3926ef9, 7bd65f2, ba18fba, f2e230c

**주요 작업**
- `JobStatus` enum 생성 (PENDING, DRAFT, APPLIED, CLOSED)
- Job 엔티티에 enum 타입 적용
- 프론트엔드 타입 정의 통일
- 구버전 상태 (INBOX) 자동 변환 로직 추가
- Dashboard에서 상태별 스타일 매핑 추가

**개선 효과**
- 프론트엔드와 백엔드 상태 값 일치
- 타입 안전성 강화
- 구버전 데이터 호환성 유지

---

### 2.8 v5.2: 주소 정제 정규식 개선 (2026-01-15)

**커밋**: 1205e18

**배경**
- 일부 주소 패턴을 올바르게 처리하지 못함
- 괄호 내부 주소, 특수문자 처리 미흡

**주요 작업**
- `cleanAddress()` 함수 정규식 수정
- 회사명 괄호 내부 주소 추출 개선
- 특수문자 및 공백 처리 강화

**개선 효과**
- 주소 추출 정확도 향상
- 카카오맵 지오코딩 성공률 증가
- 대중교통 경로 검색 안정성 개선

---

## 3. 기능별 개선 사항

### 3.1 이미지 캡처 방식

| 버전 | 방식 | 캡처 횟수 | 이미지 수 | 추천공고 제거 |
|------|------|-----------|-----------|---------------|
| v1.0 | 수동 | 1회 | 1개 | 수동 |
| v2.0 | 스크롤 자동 | 10회 | 10개 PNG | 불완전 (80%) |
| v3.0 | CDP 단일 | 1회 | 1개 JPEG | 완벽 (100%) |

**핵심 개선점**
- 스크롤 없이 전체 영역 한 번에 캡처
- 메인 섹션 선택자로 정확한 영역 지정
- 불필요한 요소 완전 제거

---

### 3.2 AI 분석 처리

| 버전 | 처리 방식 | 메모리 사용 |
|------|-----------|-------------|
| v2.0 | 동기 (병합) | 높음 |
| v3.0 | 비동기 (폴링) | 낮음 |
| v4.0 | 비동기 (최적화) | 매우 낮음 |

**핵심 개선점**
- 이미지 병합 과정 제거
- 즉시 응답 후 백그라운드 처리
- 리사이징 최적화로 메모리 절약

---

### 3.3 JSON 처리

| 버전 | 구조 | 처리 위치 | 유연성 |
|------|------|-----------|--------|
| v5.0 이전 | 고정 필드 | 분산 (4곳) | 낮음 |
| v5.0 | 동적 섹션 | 분산 (4곳) | 높음 |
| v5.1 | 동적 섹션 | 중앙 (1곳) | 높음 |

**핵심 개선점**
- 동적 섹션으로 모든 공고 형태 대응
- 중앙 처리로 수정 포인트 단일화
- V1/V2 자동 변환으로 하위 호환성 유지

---

### 3.4 상태 관리

**v5.2 이전**
- 프론트엔드: 문자열 타입
- 백엔드: 문자열 타입
- 불일치 가능성 있음

**v5.2 이후**
- 프론트엔드: JobStatus enum
- 백엔드: JobStatus enum
- 완전 일치 보장

**상태 목록**
- PENDING - 검토 대기
- DRAFT - 임시 저장
- APPLIED - 지원 완료
- CLOSED - 마감 또는 종료

---

### 3.5 주소 처리

**v5.2 이전**
- 기본 정규식만 사용
- 일부 주소 형태 처리 실패

**v5.2 이후**
- 정교한 정규식 적용
- 회사명 괄호 내부 주소 추출
- 특수문자 및 공백 처리 강화

**개선 예시**
```
입력: "주식회사 ABC (서울특별시 강남구 테헤란로 123)"
이전: 추출 실패 또는 불완전
이후: "서울특별시 강남구 테헤란로 123"
```

---

## 4. 성능 지표

### 4.1 메모리 사용량 변화

```
v2.0: 높음 (10개 이미지 + 병합)
v3.0: 보통 (1개 이미지)
v4.0: 낮음 (리사이징 최적화)
```

---

### 4.2 코드 라인 수 변화 (v5.1)

```
server.py:     280줄 → 220줄 (21% 감소)
jobParser.ts:  120줄 →  90줄 (25% 감소)
Dashboard.tsx: 620줄 → 580줄 (6% 감소)
jsonNormalizer.ts: 신규 320줄 (중앙화)
```

**순 증가**: 10줄 (중앙화를 위한 최소 투자)

---

## 5. 향후 계획

### 5.1 추가 채용 사이트 지원
- 원티드, 사람인, 잡코리아 외 다른 채용 사이트 확장
- 링크드인, 인디드 등 글로벌 플랫폼 지원
- 사이트별 최적화된 캡처 로직 구현

### 5.2 회사 정보 자동 수집
- 채용 공고 분석 시 회사에 대한 모든 정보 자동 수집
- 회사 규모, 업종, 주요 사업, 재무 정보 등 통합
- 뉴스, 기사, 리뷰 등 다양한 소스 수집

### 5.3 AI 기반 이력서 자동 작성
- 수집된 회사 정보를 바탕으로 맞춤형 이력서 생성
- 공고 요구사항에 최적화된 자기소개서 작성
- 지원자 경력과 회사 요구사항 매칭 분석
